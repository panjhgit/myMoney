# 小人三消 (XiaoRenSanXiao)

一个基于抖音小游戏平台的益智消除类游戏，玩家需要移动彩色方块，通过颜色匹配的门来消除方块。

## 🎮 游戏简介

《小人三消》是一款创新的益智游戏，结合了俄罗斯方块、路径规划和颜色匹配的元素。玩家需要控制彩色方块在8×8的棋盘上移动，通过相同颜色的门来消除方块，同时处理冰块障碍和石块阻挡。

## 🎯 游戏目标

- **主要目标**：将所有方块通过对应颜色的门消除
- **胜利条件**：棋盘上所有可移动方块都被成功消除
- **挑战**：在冰块和石块的阻碍下，找到最优的移动路径

## 🎲 游戏元素

### 方块系统
- **彩色方块**：红、蓝、绿、黄、紫、橙、粉、青等8种颜色
- **方块形状**：支持各种俄罗斯方块形状（I、L、T、O等）
- **多层方块**：方块可以堆叠，形成多层结构
- **冰块包裹**：部分方块被冰块包裹，需要先融化才能移动

### 棋盘元素
- **游戏区域**：8×8的可移动区域
- **门系统**：棋盘边缘的彩色门，对应不同颜色的方块
- **墙边界**：不可通过的边界墙
- **石块障碍**：不可移动的灰色石块

### 特殊机制
- **冰块系统**：冰块包裹的方块需要先显露才能移动
- **融化机制**：移动方块可以融化相邻的冰块
- **多层显示**：不同层的方块有不同的显示效果

## 🕹️ 操作方式

### 基本操作
1. **选择方块**：点击想要移动的方块
2. **移动方块**：点击目标位置，方块会自动寻路移动
3. **智能移动**：系统使用A*算法计算最优路径
4. **出门消除**：将方块移动到对应颜色的门位置

### 触摸控制
- **点击**：选择方块或指定移动目标
- **智能寻路**：系统自动计算最佳移动路径
- **动画效果**：平滑的移动动画和视觉反馈

## 🎨 游戏界面

### 主菜单
- **关卡选择**：显示可解锁的关卡
- **进度显示**：显示已完成的关卡
- **开始游戏**：点击开始按钮进入游戏

### 游戏界面
- **棋盘区域**：8×8的游戏棋盘
- **门边框**：彩色管道边框显示门的位置
- **信息栏**：显示金币、生命值、当前关卡
- **方块显示**：彩色方块和冰块效果

## 🎪 游戏机制详解

### 移动系统
- **A*寻路**：智能计算最短移动路径
- **碰撞检测**：避免与其他方块和障碍物碰撞
- **边界处理**：支持移动到棋盘边界外（出门）

### 消除系统
- **颜色匹配**：方块颜色必须与门颜色匹配
- **位置检测**：方块需要移动到门的确切位置
- **消除动画**：方块通过门时的视觉反馈

### 冰块系统
- **多层冰块**：方块可能被多层冰块包裹
- **显露机制**：上层方块移动后，下层冰块开始显露
- **融化效果**：冰块逐渐透明，显示内部方块

### 障碍系统
- **石块阻挡**：灰色石块不可移动，阻挡路径
- **墙边界**：棋盘边界不可通过
- **方块堆叠**：方块可以堆叠，形成复杂结构

## 🏆 游戏策略

### 基础策略
1. **观察全局**：先观察所有方块和门的位置
2. **规划路径**：考虑冰块和石块的阻碍
3. **优先级**：优先移动上层方块，显露下层冰块
4. **颜色匹配**：确保方块颜色与目标门匹配

### 高级策略
1. **连锁反应**：利用方块移动的连锁效应
2. **冰块管理**：合理利用冰块融化机制
3. **路径优化**：寻找最短和最安全的移动路径
4. **时机把握**：在合适的时机移动关键方块

## 🎵 技术特性

### 游戏引擎
- **Canvas渲染**：基于HTML5 Canvas的高性能渲染
- **GSAP动画**：流畅的动画效果和过渡
- **模块化架构**：清晰的代码结构和模块分离

### 平台支持
- **抖音小游戏**：专为抖音小游戏平台优化
- **触摸适配**：完善的触摸操作支持
- **性能优化**：60fps流畅运行

### 游戏系统
- **智能寻路**：A*算法实现最优路径计算
- **碰撞检测**：精确的物理碰撞系统
- **状态管理**：完善的游戏状态切换

## 🎨 视觉设计

### 色彩系统
- **8种主色调**：红、蓝、绿、黄、紫、橙、粉、青
- **渐变效果**：方块和门的渐变色彩
- **透明度**：冰块和特效的透明度变化

### 动画效果
- **移动动画**：平滑的方块移动动画
- **消除特效**：方块出门时的视觉反馈
- **冰块融化**：冰块逐渐透明的融化效果

### 界面设计
- **现代风格**：简洁现代的UI设计
- **响应式**：适配不同屏幕尺寸
- **用户友好**：直观的操作界面

## 🚀 开始游戏

1. **启动游戏**：打开抖音小游戏
2. **选择关卡**：从主菜单选择关卡
3. **开始游戏**：点击开始按钮
4. **移动方块**：点击方块和目标位置
5. **消除方块**：将方块移动到对应颜色的门
6. **完成关卡**：消除所有方块即可通关

## 🎯 游戏提示

- **耐心观察**：仔细观察棋盘布局和方块关系
- **逐步移动**：不要急于移动，先规划好步骤
- **利用冰块**：冰块融化可以显露更多方块
- **颜色记忆**：记住每种颜色对应的门位置
- **路径规划**：考虑移动路径上的障碍物

## 🔧 技术实现

### 核心模块
- `game.js` - 主游戏入口和状态管理
- `map-engine.js` - 核心游戏引擎
- `movement.js` - 移动和寻路系统
- `collision.js` - 碰撞检测系统
- `block.js` - 方块对象系统
- `menu.js` - 主菜单系统

### 配置系统
- `config.js` - 统一游戏配置
- 支持8×8网格，45px固定格子大小
- 完整的颜色和动画配置

### 地图数据
- `map1.js` - 关卡1地图数据
- `map2.js` - 关卡2地图数据
- 基于10×10矩阵的8×8可视区域设计

---

**享受游戏，挑战你的智慧！** 🎮✨
